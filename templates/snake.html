<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>SNAKE ‚Äî NEONarcade</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600&display=swap" rel="stylesheet">

<style>
:root{
  --neon-cyan:#00f5ff;
  --neon-pink:#ff006e;
  --bg:#050508;
}
*{margin:0;padding:0;box-sizing:border-box}

body{
  background:var(--bg);
  color:#fff;
  font-family:'Rajdhani',sans-serif;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:1rem;
}

/* Header */
.header{
  width:100%;
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:.5rem;
}
.flag{
  font-size:2rem;
}
.lang-btn{
  font-family:'Orbitron',monospace;
  font-size:.7rem;
  letter-spacing:2px;
  padding:.4rem .8rem;
  background:rgba(0,245,255,.15);
  border:1px solid rgba(0,245,255,.5);
  color:var(--neon-cyan);
}

/* Title */
h1{
  font-family:'Orbitron',monospace;
  letter-spacing:6px;
  color:var(--neon-cyan);
  text-shadow:0 0 20px var(--neon-cyan);
  margin-bottom:1rem;
}

/* HUD */
.hud{
  display:flex;
  gap:2rem;
  margin-bottom:1rem;
}
.hud-val{
  font-family:'Orbitron',monospace;
  font-size:1.4rem;
  color:var(--neon-cyan);
  text-align:center;
}
.hud-label{
  font-size:.7rem;
  opacity:.4;
  text-align:center;
}

/* Canvas */
.canvas-wrap{position:relative}
canvas{
  border:1px solid rgba(0,245,255,.3);
  box-shadow:0 0 30px rgba(0,245,255,.15);
}

/* Overlay */
.overlay{
  position:absolute;
  inset:0;
  background:rgba(5,5,8,.9);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  z-index:10;
  text-align:center;
}
.overlay h2{
  font-family:'Orbitron',monospace;
  color:var(--neon-pink);
  margin-bottom:.5rem;
}
.overlay p{
  opacity:.6;
  margin-bottom:1rem;
}
.start-btn{
  font-family:'Orbitron',monospace;
  background:var(--neon-cyan);
  border:none;
  padding:.8rem 2rem;
  letter-spacing:2px;
  box-shadow:0 0 20px var(--neon-cyan);
}

/* Mobile Controls */
.mobile-controls{
  margin-top:1.2rem;
  display:grid;
  grid-template-columns:60px 60px 60px;
  grid-template-rows:60px 60px;
  gap:10px;
}
.ctrl-btn{
  background:rgba(0,245,255,.15);
  border:1px solid rgba(0,245,255,.5);
  color:var(--neon-cyan);
  font-size:1.3rem;
  border-radius:10px;
}
.ctrl-btn:active{
  background:rgba(0,245,255,.4);
  transform:scale(.95);
}

@media(max-width:600px){
  canvas{width:90vw;height:90vw}
}
</style>
</head>

<body>

<!-- Header -->
<div class="header">
  <div class="flag">üá∞üá≠</div>
  <button class="lang-btn" id="langBtn">KH</button>
</div>

<h1 id="title">SNAKE</h1>

<div class="hud">
  <div>
    <div class="hud-val" id="score">0</div>
    <div class="hud-label" id="lblScore">SCORE</div>
  </div>
  <div>
    <div class="hud-val" id="level">1</div>
    <div class="hud-label" id="lblLevel">LEVEL</div>
  </div>
  <div>
    <div class="hud-val" id="high">0</div>
    <div class="hud-label" id="lblBest">BEST</div>
  </div>
</div>

<div class="canvas-wrap">
  <canvas id="c" width="420" height="420"></canvas>
  <div class="overlay" id="overlay">
    <h2 id="overlay-title">SNAKE</h2>
    <p id="overlay-sub">Swipe / Buttons / Keyboard</p>
    <button class="start-btn" id="startBtn">START</button>
  </div>
</div>

<!-- Mobile Buttons -->
<div class="mobile-controls">
  <div></div>
  <button class="ctrl-btn" data-dir="up">‚ñ≤</button>
  <div></div>
  <button class="ctrl-btn" data-dir="left">‚óÄ</button>
  <button class="ctrl-btn" data-dir="down">‚ñº</button>
  <button class="ctrl-btn" data-dir="right">‚ñ∂</button>
</div>

<script>
/* GAME LOGIC (same as before) */
const COLS=21, ROWS=21, CELL=20;
const canvas=document.getElementById('c');
const ctx=canvas.getContext('2d');
let snake,dir,nextDir,food,score,level,high=0,running=false,interval;

function init(){
  snake=[{x:10,y:10},{x:9,y:10},{x:8,y:10}];
  dir={x:1,y:0}; nextDir={x:1,y:0};
  score=0; level=1;
  placeFood(); updateHUD();
}
function placeFood(){
  do{food={x:Math.random()*COLS|0,y:Math.random()*ROWS|0}}
  while(snake.some(s=>s.x===food.x&&s.y===food.y));
}
function updateHUD(){
  scoreEl.textContent=score;
  levelEl.textContent=level;
  highEl.textContent=high;
}
function step(){
  dir=nextDir;
  const h={x:snake[0].x+dir.x,y:snake[0].y+dir.y};
  if(h.x<0||h.x>=COLS||h.y<0||h.y>=ROWS||snake.some(s=>s.x===h.x&&s.y===h.y)){gameOver();return;}
  snake.unshift(h);
  if(h.x===food.x&&h.y===food.y){
    score+=10*level; if(score>high)high=score;
    if(score%100===0){level++; clearInterval(interval); interval=setInterval(step,Math.max(60,200-level*15));}
    placeFood(); updateHUD();
  } else snake.pop();
  draw();
}
function draw(){
  ctx.fillStyle='#050508'; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#ff006e';
  ctx.beginPath(); ctx.arc(food.x*CELL+CELL/2,food.y*CELL+CELL/2,CELL/2-3,0,Math.PI*2); ctx.fill();
  snake.forEach((s,i)=>{ctx.fillStyle=`hsl(${180+i*4},100%,50%)`;ctx.fillRect(s.x*CELL+1,s.y*CELL+1,CELL-2,CELL-2);});
}
function gameOver(){
  running=false; clearInterval(interval);
  overlay.style.display='flex';
  overlayTitle.textContent=lang==='kh'?'·ûÖ·ûî·üã·û†·üí·ûÇ·üÅ·ûò':'GAME OVER';
  overlaySub.textContent=(lang==='kh'?'·ûñ·û∑·ûì·üí·ûë·ûª: ':'Score: ')+score;
  startBtn.textContent=lang==='kh'?'·ûõ·üÅ·ûÑ·ûò·üí·ûä·ûÑ·ûë·üÄ·ûè':'PLAY AGAIN';
}
startBtn.onclick=()=>{overlay.style.display='none';init();running=true;clearInterval(interval);interval=setInterval(step,200);draw();}

/* Controls */
function handleDir(d){
  const m={up:{x:0,y:-1},down:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};
  const nd=m[d];
  if(nd && !(nd.x===-dir.x&&nd.y===-dir.y)) nextDir=nd;
}
document.addEventListener('keydown',e=>{
  const k={ArrowUp:'up',ArrowDown:'down',ArrowLeft:'left',ArrowRight:'right',w:'up',a:'left',s:'down',d:'right'};
  if(k[e.key]) handleDir(k[e.key]);
});
document.querySelectorAll('.ctrl-btn').forEach(b=>b.addEventListener('touchstart',e=>{e.preventDefault();handleDir(b.dataset.dir);}))

/* Language */
let lang='en';
langBtn.onclick=()=>{
  lang=lang==='en'?'kh':'en';
  langBtn.textContent=lang==='en'?'KH':'EN';
  lblScore.textContent=lang==='kh'?'·ûñ·û∑·ûì·üí·ûë·ûª':'SCORE';
  lblLevel.textContent=lang==='kh'?'·ûÄ·ûò·üí·ûö·û∑·ûè':'LEVEL';
  lblBest.textContent=lang==='kh'?'·ûõ·üí·û¢·ûî·üÜ·ûï·ûª·ûè':'BEST';
  overlaySub.textContent=lang==='kh'?'·û¢·ûº·ûü ·û¨ ·ûÖ·ûª·ûÖ ·ûî·üä·ûº·ûè·ûª·ûÑ':'Swipe / Buttons / Keyboard';
  startBtn.textContent=lang==='kh'?'·ûÖ·û∂·ûî·üã·ûï·üí·ûè·ûæ·ûò':'START';
};
const scoreEl=score, levelEl=level, highEl=high;
</script>

</body>
</html>
